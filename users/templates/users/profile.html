{% extends 'universities/base.html' %}
{% load crispy_forms_filters %}

{% block title %}Profile{% endblock %}
{% load crispy_forms_tags %}
{% block body %}
    <div class="container shadow-lg p-3 mb-5 bg-white rounded text-dark raised-layout-forms">
        <h1>{{ user.username }}</h1>
        <p>{{ user.email }}</p>
        <small>Profile Info</small>
        <hr>
        <h6>Full Name</h6>
        <p>{{ user.profile.first_name }} {{ user.profile.last_name }}</p>
        <div class="row">
            <div class="col-sm">
                <h6>GPA</h6>
                <p>{{ user.profile.gpa }}</p>
            </div>
            <div class="col-sm">
                <h6>SAT Score</h6>
                <p>{{ user.profile.sat }}</p>
            </div>
            <div class="col-sm">
                <h6>ACT Score</h6>
                <p>{{ user.profile.act }}</p>
            </div>
        </div>
        <h6>About</h6>
        <p>{{ user.profile.bio }}</p>
        <hr>
        <div class="accordion" id="update-profile">
            <div class="card">
                <div class="card-header" id="headingOne">
                    <h2 class="mb-0">
                        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne"
                                aria-expanded="true" aria-controls="collapseOne">
                            Update Profile
                        </button>
                    </h2>
                </div>
                <div id="collapseOne" class="collapse" aria-labelledby="headingOne"
                     data-parent="#update-profile">
                    <div class="card-body">
                        <form method="POST" enctype="multipart/form-data" id="profile-form" class="mt-5">
                            {% csrf_token %}
                            <fieldset class="form-group">
                                <legend class="border-bottom mb4">
                                    Update Profile Info
                                </legend>
                                <div class="row">
                                    <div class="col-sm">
                                        {{ user_update.username | as_crispy_field }}
                                    </div>
                                    <div class="col-sm">
                                        {{ user_update.email | as_crispy_field }}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm">
                                        {{ profile_update.first_name | as_crispy_field }}
                                    </div>
                                    <div class="col-sm">
                                        {{ profile_update.last_name | as_crispy_field }}
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm">
                                        {{ profile_update.gpa | as_crispy_field }}
                                    </div>
                                    <div class="col-sm">
                                        {{ profile_update.sat | as_crispy_field }}
                                    </div>
                                    <div class="col-sm">
                                        {{ profile_update.act | as_crispy_field }}
                                    </div>
                                </div>
                                <div>
                                    {{ profile_update.bio | as_crispy_field }}
                                </div>
                            </fieldset>
                            <div class="form-group">
                                <button class="btn btn-success btn-sm contact-button" type="submit" id="update">Update
                                </button>
                            </div>
                            <hr>
                            <a href="{% url 'delete_user' %}" class="btn btn-danger btn-sm">Delete Profile</a>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% load static %}
    <script src="{% static 'users/js/users.js' %}" type="text/javascript"></script>
{% endblock %}